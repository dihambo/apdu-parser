# import pytest
import json
from apdu_parser.apdu_telcom import Proactive_Command, TelcomAPDU

def dump_to_json(data,file_name="temp"):
    with open(f"./{file_name}.json", "w", encoding="utf-8") as f:
        json.dump(data, f, indent=4, ensure_ascii=False)

def test_proactiveCmd_sms_tp_1():
    pro_cmd = "D0819D8103011300820281838B819101000881015618820004860084B0014E00000000007BD15CDE2603B7CD2EB71F9C63DEAD46AC57E331C62F4F367B3AF3F32691257FFD91D38EA4004D93E4AA43FF420E32C09AC7B34A1ABBCE2E230EB7B3D4249EC954CE9AE1702E6A8186EB1BDFA5D0C10A650DBF96D8705EF9DAD783C76EE873C70ABA4C4B39E41F5859785FEE5E10E7BD6D1772720E132E3F024F6BDA"    
    pro_cmd = Proactive_Command(pro_cmd)

    dump_to_json(pro_cmd.to_dict())

    pass
def test_proactiveCmd_sms_tp_2():
    pro_cmd = "D0819D8103011300820281838B819101000881015618820004860084B0014E00000000007BD15CDE2603B7CD2EB71F9C63DEAD46AC57E331C62F4F367B3AF3F32691257FFD91D38EA4004D93E4AA43FF420E32C09AC7B34A1ABBCE2E230EB7B3D4249EC954CE9AE1702E6A8186EB1BDFA5D0C10A650DBF96D8705EF9DAD783C76EE873C70ABA4C4B39E41F5859785FEE5E10E7BD6D1772720E132E3F024F6BDA"    
    pro_cmd = Proactive_Command(pro_cmd)

    dump_to_json(pro_cmd.to_dict())

    pass
def test_cmd():
    pro_cmd = "801400000F810301240082028281830100900103"    
    pro_cmd = TelcomAPDU(pro_cmd)


    dump_to_json(pro_cmd.to_dict())

    pass

def test_ENVELOPE_SMS_PP_Download():
    cmd = "80C20000A4D181A182028381060881683110305005F08B81904005815915F67FF64250717131234280027000007B1502011515B201000000000000008155B7AA37C6463FAA63226180E60C005B10D156000101000161000000000000000010D15600010100016110000000000000000BA0000001514341696430320380800027C90A810202558201F88301F8EF08C702FFFFC802FFFFEA0F800DFF0000000102010203B20212000000"
    dump_to_json(TelcomAPDU(cmd).to_dict())